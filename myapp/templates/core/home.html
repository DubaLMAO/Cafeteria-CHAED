{% extends "layouts/base.html" %}

{% block title %}Inicio - Café CHAED{% endblock %}

{% block content %}

<!--Hero Section -->
<section id="home" class="hero">
    <div class="container">
        <div class="row">
            <div class="col-lg-6">
                <h1>Café. Simple. Perfecto.</h1>
                <p>Descubre la esencia pura del café en un ambiente minimalista diseñado para tu tranquilidad.</p>
                <a href="#menu" class="btn btn-primary">Ver Menú</a>
            </div>
        </div>
    </div>
</section>


<!--Sección del Menú de la cafetería -->
<section id="menu" class="py-5">
    <div class="container">
        <h2 class="section-title">Nuestro Menú</h2>
        <div class="row">

            <!-- Cafes -->
            <div class="col-lg-6">
                <div class="card h-100">
                    <div class="card-body">
                        <h3 class="card-title">Cafés Especiales</h3>

                        {% for cafe in cafes %}
                        <div class="menu-item mb-4">
                            <div class="d-flex justify-content-between">
                                <div>
                                    <h5>{{ cafe.nombre }}</h5>
                                    <p class="text-muted small">{{ cafe.descripcion }}</p>
                                </div>
                                <span class="price">${{ cafe.precio }}</span>
                            </div>

                            <!-- Calificación -->
                            <div class="rating mt-2">
                                <span class="text-muted small">Calificar:</span>

                                <div class="stars mt-1" data-product="{{ cafe.nombre|slugify }}">
                                    <button class="star-btn" data-rating="1">★</button>
                                    <button class="star-btn" data-rating="2">★</button>
                                    <button class="star-btn" data-rating="3">★</button>
                                    <button class="star-btn" data-rating="4">★</button>
                                    <button class="star-btn" data-rating="5">★</button>
                                </div>

                                <p class="mt-1 small text-primary votos" id="votos-{{ cafe.nombre|slugify }}">
                                    Votos: 0
                                </p>
                            </div>

                        </div>
                        {% empty %}
                        <p>No hay cafés registrados aún.</p>
                        {% endfor %}

                    </div>
                </div>
            </div>

            <!-- Snacks -->
            <div class="col-lg-6">
                <div class="card h-100">
                    <div class="card-body">
                        <h3 class="card-title">Pasteles & Snacks</h3>

                        {% for snack in snacks %}
                        <div class="menu-item mb-4">
                            <div class="d-flex justify-content-between">
                                <div>
                                    <h5>{{ snack.nombre }}</h5>
                                    <p class="text-muted small">{{ snack.descripcion }}</p>
                                </div>
                                <span class="price">${{ snack.precio }}</span>
                            </div>

                            <!-- Calificación -->
                            <div class="rating mt-2">
                                <span class="text-muted small">Calificar:</span>

                                <div class="stars mt-1" data-product="{{ snack.nombre|slugify }}">
                                    <button class="star-btn" data-rating="1">★</button>
                                    <button class="star-btn" data-rating="2">★</button>
                                    <button class="star-btn" data-rating="3">★</button>
                                    <button class="star-btn" data-rating="4">★</button>
                                    <button class="star-btn" data-rating="5">★</button>
                                </div>

                                <p class="mt-1 small text-primary votos" id="votos-{{ snack.nombre|slugify }}">
                                    Votos: 0
                                </p>
                            </div>

                        </div>
                        {% empty %}
                        <p>No hay snacks registrados aún.</p>
                        {% endfor %}

                    </div>
                </div>
            </div>

        </div>
    </div>
</section>


<!--Sección de Acerca de -->
<section id="about" class="py-5 about-section">
    <div class="container">
        <div class="row align-items-center">
            <div class="col-lg-6">
                <h2 class="section-title text-start">Nuestra Historia</h2>
                <p class="lead">En Café CHAED creemos que la simplicidad es la máxima sofisticación.</p>
                <p>Fundado en 2025 con la visión de crear un espacio donde el café de calidad se encuentra con el diseño minimalista. Cada taza es preparada con precisión, cada detalle pensado para tu comodidad.</p>
                <p>Utilizamos granos seleccionados de productores locales, tostados artesanalmente para resaltar los sabores únicos de cada origen.</p>
            </div>
            <div class="col-lg-6">
                <div class="text-center">
                    <i class="fas fa-coffee" style="font-size: 10rem; color: var(--accent-color);"></i>
                </div>
            </div>
        </div>
    </div>
</section>


<!--Sección de contacto -->
<section id="contact" class="py-5">
    <div class="container">
        <div class="row">
            <div class="col-lg-8">
                <h2 class="section-title text-start">Visítanos</h2>
                <div class="row">
                    <div class="col-md-6 mb-4">
                        <h4><i class="fas fa-map-marker-alt me-2"></i>Ubicación</h4>
                        <p>Av. Madero Norte #4<br>Huetamo Centro<br>Huetamo De Nuñez, Michoacán</p>
                    </div>
                    <div class="col-md-6 mb-4">
                        <h4><i class="fas fa-clock me-2"></i>Horarios</h4>
                        <p>Lunes - Viernes: 7:00 - 20:00<br>
                            Sábado - Domingo: 8:00 - 21:00</p>
                    </div>
                    <div class="col-md-6 mb-4">
                        <h4><i class="fas fa-phone me-2"></i>Teléfono</h4>
                        <p>+52 733 123 4567</p>
                    </div>
                    <div class="col-md-6 mb-4">
                        <h4><i class="fas fa-envelope me-2"></i>Email</h4>
                        <p>chaed@gmail.com</p>
                    </div>
                </div>
            </div>
            <div class="col-lg-4">
                <div class="contact-info p-4">
                    <h3>Síguenos</h3>
                    <div class="social-icons">
                        <a href="#"><i class="fab fa-facebook-f"></i></a>
                        <a href="#"><i class="fab fa-instagram"></i></a>
                        <a href="#"><i class="fab fa-twitter"></i></a>
                    </div>
                    <hr style="border-color: rgba(255,255,255,0.2);">
                    <h4>Newsletter</h4>
                    <p>Recibe nuestras ofertas especiales</p>
                    <div class="input-group">
                        <input type="email" class="form-control" placeholder="Tu email">
                        <button class="btn btn-primary">Suscribir</button>
                    </div>
                </div>
            </div>
        </div>
    </div>
</section>


<!--Footer -->
<footer>
    <div class="container">
        <p>&copy; 2025 Café CHAED. Todos los derechos reservados.</p>
    </div>
</footer>


<!-- Modal de voto -->
<div class="modal fade" id="votoModal" tabindex="-1">
  <div class="modal-dialog modal-dialog-centered">
    <div class="modal-content text-center p-4">
      <h4>¡Gracias por tu opinión! ☕</h4>
      <p>Tu calificación ha sido registrada.</p>
      <button class="btn btn-primary" data-bs-dismiss="modal">Aceptar</button>
    </div>
  </div>
</div>


<!-- JS Votos y Modal -->
<script>
document.addEventListener("DOMContentLoaded", () => {

    // Cargar los votos guardados
    document.querySelectorAll(".votos").forEach(v => {
        let id = v.id.replace("votos-", "");
        let votosGuardados = localStorage.getItem(`votos-${id}`) || 0;
        v.innerText = `Votos: ${votosGuardados}`;
    });

    // Manejar estrellas
    document.querySelectorAll(".star-btn").forEach(btn => {
        btn.addEventListener("click", function() {

            let container = this.closest(".stars");
            let product = container.dataset.product;

            let id = `votos-${product}`;
            let votosActuales = parseInt(localStorage.getItem(id) || 0) + 1;

            localStorage.setItem(id, votosActuales);

            document.getElementById(id).innerText = `Votos: ${votosActuales}`;

            // Mostrar modal
            let modal = new bootstrap.Modal(document.getElementById('votoModal'));
            modal.show();
        });
    });
});
</script>

{% endblock %}
